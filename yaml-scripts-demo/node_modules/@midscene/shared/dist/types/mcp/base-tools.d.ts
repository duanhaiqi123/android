import type { McpServer } from '@modelcontextprotocol/sdk/server/mcp.js';
import type { BaseAgent, BaseDevice, IMidsceneTools, ToolDefinition } from './types';
/**
 * Base class for platform-specific MCP tools
 * Generic type TAgent allows subclasses to use their specific agent types
 */
export declare abstract class BaseMidsceneTools<TAgent extends BaseAgent = BaseAgent> implements IMidsceneTools {
    protected mcpServer?: McpServer;
    protected agent?: TAgent;
    protected toolDefinitions: ToolDefinition[];
    /**
     * Ensure agent is initialized and ready for use.
     * Must be implemented by subclasses to create platform-specific agent.
     * @param initParam Optional initialization parameter (platform-specific, e.g., URL, device ID)
     * @returns Promise resolving to initialized agent instance
     * @throws Error if agent initialization fails
     */
    protected abstract ensureAgent(initParam?: string): Promise<TAgent>;
    /**
     * Optional: prepare platform-specific tools (e.g., device connection)
     */
    protected preparePlatformTools(): ToolDefinition[];
    /**
     * Must be implemented by subclasses to create a temporary device instance
     * This allows getting real actionSpace without connecting to device
     */
    protected abstract createTemporaryDevice(): BaseDevice;
    /**
     * Initialize all tools by querying actionSpace
     * Uses two-layer fallback strategy:
     * 1. Try to get actionSpace from connected agent (if available)
     * 2. Create temporary device instance to read actionSpace (always succeeds)
     */
    initTools(): Promise<void>;
    /**
     * Attach to MCP server and register all tools
     */
    attachToServer(server: McpServer): void;
    /**
     * Wrapper for auto-destroy behavior
     */
    private toolWithAutoDestroy;
    /**
     * Cleanup method - destroy agent and release resources
     */
    closeBrowser(): Promise<void>;
    /**
     * Helper: Convert base64 screenshot to image content array
     */
    protected buildScreenshotContent(screenshot: string): {
        type: "image";
        data: string;
        mimeType: string;
    }[];
}
