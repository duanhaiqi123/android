{"version":3,"file":"mcp-server.mjs","sources":["../../src/mcp-server.ts"],"sourcesContent":["import type { GenericAgent } from '@midscene/shared/mcp';\nimport {\n  BaseMCPServer,\n  type Tool,\n  createMCPServerLauncher,\n} from '@midscene/shared/mcp';\nimport type { AgentOverChromeBridge } from './bridge-mode';\nimport { WebMidsceneTools } from './mcp-tools';\n\ndeclare const __VERSION__: string;\n\n/**\n * Web MCP Server class\n */\nexport class WebMCPServer extends BaseMCPServer {\n  constructor(toolsManager?: WebMidsceneTools) {\n    super(\n      {\n        name: '@midscene/web-bridge-mcp',\n        version: __VERSION__,\n        description: 'Control the browser using natural language commands',\n      },\n      toolsManager,\n    );\n  }\n\n  protected createToolsManager(): WebMidsceneTools {\n    return new WebMidsceneTools();\n  }\n}\n\n/**\n * Create an MCP server launcher for a specific Agent\n */\nexport function mcpServerForAgent(agent: GenericAgent) {\n  return createMCPServerLauncher({\n    agent,\n    platformName: 'Web',\n    ToolsManagerClass: WebMidsceneTools,\n    MCPServerClass: WebMCPServer,\n  });\n}\n\n/**\n * Create MCP kit for a specific Agent\n */\nexport async function mcpKitForAgent(agent: GenericAgent): Promise<{\n  description: string;\n  tools: Tool[];\n}> {\n  const toolsManager = new WebMidsceneTools();\n\n  // Convert to AgentOverChromeBridge for Web tools manager\n  const webAgent = agent as AgentOverChromeBridge;\n  toolsManager.setAgent(webAgent);\n  await toolsManager.initTools();\n\n  return {\n    description:\n      'Midscene Bridge MCP Server: Control the browser using natural language commands for navigation, clicking, input, hovering, screenshots waitFor, and achieving goals.',\n    tools: toolsManager.getToolDefinitions(),\n  };\n}\n"],"names":["WebMCPServer","BaseMCPServer","WebMidsceneTools","toolsManager","__VERSION__","mcpServerForAgent","agent","createMCPServerLauncher","mcpKitForAgent","webAgent"],"mappings":";;AAcO,MAAMA,qBAAqBC;IAYtB,qBAAuC;QAC/C,OAAO,IAAIC;IACb;IAbA,YAAYC,YAA+B,CAAE;QAC3C,KAAK,CACH;YACE,MAAM;YACN,SAASC;YACT,aAAa;QACf,GACAD;IAEJ;AAKF;AAKO,SAASE,kBAAkBC,KAAmB;IACnD,OAAOC,wBAAwB;QAC7BD;QACA,cAAc;QACd,mBAAmBJ;QACnB,gBAAgBF;IAClB;AACF;AAKO,eAAeQ,eAAeF,KAAmB;IAItD,MAAMH,eAAe,IAAID;IAGzB,MAAMO,WAAWH;IACjBH,aAAa,QAAQ,CAACM;IACtB,MAAMN,aAAa,SAAS;IAE5B,OAAO;QACL,aACE;QACF,OAAOA,aAAa,kBAAkB;IACxC;AACF"}